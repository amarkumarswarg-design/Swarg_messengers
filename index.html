<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SWARG SUPREME | Amar Kumar Professional</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/browser-image-compression/2.0.2/browser-image-compression.min.js"></script>

    <style>
        :root {
            --neon: #00f3ff; --gold: #ffd700; --bg: #010103; --glass: rgba(10, 10, 20, 0.9);
            --blue-tick: #1da1f2; --glow: 0 0 15px var(--neon);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Rajdhani', sans-serif; }
        body { background: var(--bg); color: #fff; overflow-x: hidden; min-height: 100vh; }

        /* --- BACKGROUND PARTICLES (DOTS) --- */
        #particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* --- SUPREME HEADER --- */
        header {
            padding: 30px 10px; background: rgba(0,0,0,0.95); border-bottom: 3px solid var(--neon);
            display: flex; flex-direction: column; align-items: center; position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 0 40px rgba(0, 243, 255, 0.4);
        }

        .swarg-logo {
            font-family: 'Orbitron', sans-serif; font-size: 3.5rem; font-weight: 900;
            letter-spacing: 12px; color: #fff; text-shadow: 0 0 20px var(--neon); margin-bottom: 5px;
        }

        .creator-flex { display: flex; align-items: center; gap: 15px; }

        .amar-glow {
            font-family: 'Orbitron', sans-serif; font-size: 1.5rem; color: var(--gold);
            text-transform: uppercase; letter-spacing: 3px;
            /* CONTINUOUS INFINITE GLOW */
            animation: infiniteNeon 2s infinite alternate;
        }

        @keyframes infiniteNeon {
            0% { text-shadow: 0 0 5px var(--gold), 0 0 10px var(--gold); transform: scale(0.98); }
            100% { text-shadow: 0 0 30px var(--gold), 0 0 50px var(--gold), 0 0 80px #fff; transform: scale(1.05); }
        }

        .tick {
            width: 28px; height: 28px; background: var(--blue-tick); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-size: 14px;
            box-shadow: 0 0 20px var(--blue-tick); animation: tickBeat 1.5s infinite;
        }
        @keyframes tickBeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        /* --- DASHBOARD UI --- */
        .container { padding: 40px 20px; max-width: 1200px; margin: 0 auto; position: relative; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 25px; }

        .card {
            background: var(--glass); border: 1px solid rgba(0, 243, 255, 0.2);
            padding: 45px 20px; border-radius: 30px; text-align: center;
            transition: 0.5s; cursor: pointer; backdrop-filter: blur(10px);
        }
        .card:hover {
            transform: translateY(-15px) rotateX(10deg); border-color: var(--neon);
            box-shadow: 0 25px 60px rgba(0, 243, 255, 0.3); background: rgba(0, 243, 255, 0.08);
        }
        .card i { font-size: 4rem; display: block; margin-bottom: 25px; filter: drop-shadow(0 0 10px var(--neon)); }
        .card h3 { font-family: 'Orbitron'; font-size: 1.2rem; }

        /* --- WORKSPACE --- */
        #workspace { display: none; animation: zoomIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes zoomIn { from { opacity: 0; scale: 0.8; } to { opacity: 1; scale: 1; } }

        .panel { background: var(--glass); border: 2px solid var(--neon); padding: 40px; border-radius: 35px; box-shadow: 0 0 50px rgba(0, 243, 255, 0.15); }
        .back-nav { color: var(--neon); font-family: 'Orbitron'; cursor: pointer; margin-bottom: 30px; display: block; font-weight: bold; }

        /* --- VISUAL SPLITTER GRID --- */
        .page-preview-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px; margin-top: 25px; max-height: 400px; overflow-y: auto; padding: 10px;
            background: rgba(0,0,0,0.5); border-radius: 15px;
        }
        .page-item {
            position: relative; border: 2px solid #333; border-radius: 10px; overflow: hidden;
            cursor: pointer; transition: 0.3s;
        }
        .page-item.selected { border-color: var(--neon); box-shadow: 0 0 15px var(--neon); }
        .page-item canvas { width: 100%; display: block; }
        .page-badge {
            position: absolute; top: 5px; left: 5px; background: var(--neon);
            color: #000; padding: 2px 8px; border-radius: 5px; font-weight: bold; font-size: 12px;
        }

        /* --- INPUTS & BUTTONS --- */
        .input-box { width: 100%; background: #000; border: 1px solid #333; color: #fff; padding: 20px; border-radius: 15px; font-size: 1.1rem; margin-top: 10px; }
        .action-btn {
            width: 100%; padding: 22px; margin-top: 30px; border: none; border-radius: 50px;
            background: linear-gradient(90deg, #00f3ff, #0055ff); color: #000;
            font-family: 'Orbitron'; font-weight: 900; font-size: 1.4rem; cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 243, 255, 0.4);
        }
        .action-btn:active { transform: scale(0.95); }

        #status { text-align: center; margin-top: 25px; color: var(--gold); font-size: 1.2rem; font-weight: bold; }
    </style>
</head>
<body>

<canvas id="particle-canvas"></canvas>

<header>
    <div class="swarg-logo">SWARG</div>
    <div class="creator-flex">
        <span class="amar-glow">Amar Kumar</span>
        <div class="tick">‚úî</div>
    </div>
</header>

<div class="container">
    <div id="home-view">
        <p style="text-align:center; color:#777; margin-bottom:40px; letter-spacing:2px;">LOCAL PDF POWERHOUSE V7 | NO LIMITS</p>
        <div class="grid">
            <div class="card" onclick="openPanel('img2pdf')"><i>üì∏</i><h3>Bulk Img to PDF</h3></div>
            <div class="card" onclick="openPanel('text2pdf')"><i>‚úçÔ∏è</i><h3>Notes to PDF</h3></div>
            <div class="card" onclick="openPanel('merge')"><i>üîó</i><h3>Safe Merge</h3></div>
            <div class="card" onclick="openPanel('split')"><i>‚úÇÔ∏è</i><h3>Visual Split</h3></div>
            <div class="card" onclick="openPanel('comp-pdf')"><i>üìâ</i><h3>PDF Shrink</h3></div>
            <div class="card" onclick="openPanel('comp-jpg')"><i>üñºÔ∏è</i><h3>JPG Shrink</h3></div>
        </div>
    </div>

    <div id="workspace">
        <span class="back-nav" onclick="location.reload()">‚Üê SWARG CONTROL CENTER</span>
        <div class="panel">
            <h2 id="panel-title" style="font-family:'Orbitron'; color:var(--neon); margin-bottom:20px; text-align:center;">TOOL NAME</h2>
            <div id="panel-content"></div>
            <div id="status"></div>
        </div>
    </div>
</div>

<script>
    // --- 1. PARTICLE ENGINE (DOTS) ---
    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function initParticles() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        particles = [];
        for(let i=0; i<100; i++) {
            particles.push({
                x: Math.random() * canvas.width, y: Math.random() * canvas.height,
                vx: (Math.random()-0.5) * 1, vy: (Math.random()-0.5) * 1, size: Math.random() * 3
            });
        }
    }
    function drawParticles() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        ctx.fillStyle = "rgba(0, 243, 255, 0.5)";
        particles.forEach(p => {
            ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
            p.x += p.vx; p.y += p.vy;
            if(p.x < 0 || p.x > canvas.width) p.vx *= -1;
            if(p.y < 0 || p.y > canvas.height) p.vy *= -1;
        });
        requestAnimationFrame(drawParticles);
    }
    initParticles(); drawParticles();

    // --- 2. GLOBAL HANDLERS ---
    const { jsPDF } = window.jspdf;
    const { PDFDocument } = PDFLib;
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

    let selectedSplitPages = new Set();

    function openPanel(tool) {
        document.getElementById('home-view').style.display = 'none';
        const ws = document.getElementById('workspace');
        const content = document.getElementById('panel-content');
        const title = document.getElementById('panel-title');
        ws.style.display = 'block';

        if(tool === 'img2pdf') {
            title.innerText = "BULK IMAGES TO PDF";
            content.innerHTML = `<label>Select 1000+ Images:</label><input type="file" id="fIn" multiple class="input-box"><button class="action-btn" onclick="runImg2Pdf()">GENERATE PDF</button>`;
        } else if(tool === 'text2pdf') {
            title.innerText = "MULTI-PAGE TEXT TO PDF";
            content.innerHTML = `<label>Paste your Long Notes:</label><textarea id="tIn" rows="12" class="input-box" placeholder="Write anything..."></textarea><button class="action-btn" onclick="runText2Pdf()">CREATE PDF</button>`;
        } else if(tool === 'split') {
            title.innerText = "VISUAL PAGE SPLITTER";
            content.innerHTML = `<label>Upload PDF to see pages:</label><input type="file" id="fIn" accept=".pdf" class="input-box" onchange="renderPdfForSplit(this)"><div id="split-grid" class="page-preview-grid"></div><button class="action-btn" onclick="runVisualSplit()">EXTRACT SELECTED</button>`;
        } else if(tool === 'merge') {
            title.innerText = "SAFE PDF MERGER";
            content.innerHTML = `<label>Select PDFs in sequence:</label><input type="file" id="fIn" multiple accept=".pdf" class="input-box"><button class="action-btn" onclick="runMerge()">MERGE ALL</button>`;
        } else if(tool === 'comp-jpg') {
            title.innerText = "JPG TARGET COMPRESSOR";
            content.innerHTML = `<label>Upload Photo:</label><input type="file" id="fIn" accept="image/*" class="input-box"><label>Target Size (KB):</label><input type="number" id="sIn" class="input-box" value="100"><button class="action-btn" onclick="runCompJPG()">COMPRESS TO TARGET</button>`;
        } else if(tool === 'comp-pdf') {
            title.innerText = "SMART PDF SHRINKER";
            content.innerHTML = `<label>Upload PDF:</label><input type="file" id="fIn" accept=".pdf" class="input-box"><button class="action-btn" onclick="runCompPDF()">SHRINK PDF</button>`;
        }
    }

    // --- 3. THE BRAIN (LOGIC) ---

    async function getName() {
        const { value: name } = await Swal.fire({ title: 'PDF Name', input: 'text', inputValue: 'Swarg_Doc', background: '#000', color: '#fff' });
        return name || 'Swarg_Doc';
    }

    async function runImg2Pdf() {
        const files = document.getElementById('fIn').files;
        if(!files.length) return alert("Select images!");
        const name = await getName();
        const doc = new jsPDF();
        document.getElementById('status').innerText = "Analyzing Chunks...";
        for(let i=0; i<files.length; i++) {
            const data = await new Promise(r => { const rd = new FileReader(); rd.onload = e => r(e.target.result); rd.readAsDataURL(files[i]); });
            if(i > 0) doc.addPage();
            doc.addImage(data, 'JPEG', 0, 0, 210, 297, undefined, 'FAST');
            document.getElementById('status').innerText = `Adding page ${i+1}/${files.length}`;
        }
        doc.save(name + ".pdf");
        document.getElementById('status').innerText = "PDF Saved Successfully!";
    }

    async function runText2Pdf() {
        const text = document.getElementById('tIn').value;
        if(!text) return;
        const name = await getName();
        const doc = new jsPDF();
        document.getElementById('status').innerText = "Breaking text into pages...";
        
        const lines = doc.splitTextToSize(text, 180);
        let y = 20;
        for(let line of lines) {
            if(y > 280) { doc.addPage(); y = 20; }
            doc.text(line, 15, y);
            y += 7;
        }
        doc.save(name + ".pdf");
        document.getElementById('status').innerText = "Multi-page PDF Created!";
    }

    async function renderPdfForSplit(input) {
        const grid = document.getElementById('split-grid');
        grid.innerHTML = "Reading PDF...";
        selectedSplitPages.clear();
        const file = input.files[0];
        const arrayBuffer = await file.arrayBuffer();
        const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
        grid.innerHTML = "";
        
        for(let i=1; i<=pdf.numPages; i++) {
            const page = await pdf.getPage(i);
            const canvas = document.createElement('canvas');
            const viewport = page.getViewport({scale: 0.3});
            canvas.height = viewport.height; canvas.width = viewport.width;
            await page.render({canvasContext: canvas.getContext('2d'), viewport}).promise;
            
            const div = document.createElement('div');
            div.className = "page-item";
            div.innerHTML = `<span class="page-badge">${i}</span>`;
            div.appendChild(canvas);
            div.onclick = () => {
                div.classList.toggle('selected');
                if(selectedSplitPages.has(i-1)) selectedSplitPages.delete(i-1);
                else selectedSplitPages.add(i-1);
            };
            grid.appendChild(div);
        }
    }

    async function runVisualSplit() {
        if(selectedSplitPages.size === 0) return alert("Select some pages!");
        const name = await getName();
        const file = document.getElementById('fIn').files[0];
        const pdf = await PDFDocument.load(await file.arrayBuffer());
        const newPdf = await PDFDocument.create();
        const pages = await newPdf.copyPages(pdf, Array.from(selectedSplitPages).sort((a,b)=>a-b));
        pages.forEach(p => newPdf.addPage(p));
        const bytes = await newPdf.save();
        const blob = new Blob([bytes], {type: "application/pdf"});
        const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = name+".pdf"; link.click();
    }

    async function runMerge() {
        const files = document.getElementById('fIn').files;
        if(files.length < 2) return;
        const name = await getName();
        document.getElementById('status').innerText = "Merging high-memory buffers...";
        const merged = await PDFDocument.create();
        for(let f of files) {
            const pdf = await PDFDocument.load(await f.arrayBuffer(), {ignoreEncryption: true});
            const pages = await merged.copyPages(pdf, pdf.getPageIndices());
            pages.forEach(p => merged.addPage(p));
        }
        const bytes = await merged.save();
        const blob = new Blob([bytes], {type: "application/pdf"});
        const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = name+".pdf"; link.click();
        document.getElementById('status').innerText = "Done!";
    }

    async function runCompJPG() {
        const file = document.getElementById('fIn').files[0];
        const target = document.getElementById('sIn').value;
        document.getElementById('status').innerText = "Compressing to target...";
        const options = { maxSizeMB: target/1024, maxWidthOrHeight: 1920, useWebWorker: true };
        const compressed = await imageCompression(file, options);
        const link = document.createElement('a'); link.href = URL.createObjectURL(compressed); link.download = "Swarg_Small.jpg"; link.click();
        document.getElementById('status').innerText = `Final Size: ${(compressed.size/1024).toFixed(1)} KB`;
    }

    async function runCompPDF() {
        const file = document.getElementById('fIn').files[0];
        document.getElementById('status').innerText = "Optimizing internal streams...";
        const pdf = await PDFDocument.load(await file.arrayBuffer());
        const bytes = await pdf.save({ useObjectStreams: true, addDefaultPage: false });
        const blob = new Blob([bytes], {type: "application/pdf"});
        const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = "Swarg_Lite.pdf"; link.click();
        document.getElementById('status').innerText = "Compressed!";
    }
</script>
</body>
</html>
