<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>SWARG PRO | AMAR KUMAR</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/5.0.0/tesseract.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/browser-image-compression/2.0.2/browser-image-compression.min.js"></script>

    <style>
        /* [L-50] Android Supreme Styles */
        :root { --neon: #00f3ff; --gold: #ffd700; --bg: #010103; --glass: rgba(15, 15, 25, 0.98); --blue-tick: #1da1f2; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Rajdhani', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: #fff; overflow-x: hidden; min-height: 100vh; }
        #particle-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* [L-100] Amar Kumar Branding - Infinite Shine */
        header { padding: 30px 15px; background: #000; border-bottom: 3px solid var(--neon); display: flex; flex-direction: column; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 0 40px rgba(0, 243, 255, 0.5); }
        .swarg-text { font-family: 'Orbitron', sans-serif; font-size: 3rem; letter-spacing: 10px; color: #fff; text-shadow: 0 0 15px var(--neon); }
        .branding { display: flex; align-items: center; gap: 15px; margin-top: 10px; }
        .amar-shine { font-family: 'Orbitron', sans-serif; font-size: 1.6rem; color: var(--gold); letter-spacing: 3px; font-weight: 900; animation: infiniteGlow 2s infinite alternate; }
        @keyframes infiniteGlow { 0% { text-shadow: 0 0 5px var(--gold); opacity: 0.8; } 100% { text-shadow: 0 0 40px var(--gold), 0 0 80px #fff; transform: scale(1.05); opacity: 1; } }
        .tick { width: 30px; height: 30px; background: var(--blue-tick); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px var(--blue-tick); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        /* [L-200] Giga Tool Grid */
        .container { padding: 30px 15px; max-width: 1200px; margin: 0 auto; }
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .card { background: var(--glass); border: 1px solid rgba(0, 243, 255, 0.2); padding: 30px 15px; border-radius: 25px; text-align: center; transition: 0.3s; }
        .card:active { transform: scale(0.95); background: rgba(0, 243, 255, 0.1); }
        .card i { font-size: 3rem; display: block; margin-bottom: 15px; filter: drop-shadow(0 0 10px var(--neon)); }
        .card h3 { font-family: 'Orbitron'; font-size: 0.8rem; }

        /* [L-350] Advanced Visual Panels */
        #workspace { display: none; padding-bottom: 50px; }
        .panel { background: var(--glass); border: 2px solid var(--neon); padding: 25px 15px; border-radius: 35px; box-shadow: 0 0 30px rgba(0, 243, 255, 0.2); }
        .back-btn { color: var(--neon); font-family: 'Orbitron'; cursor: pointer; margin-bottom: 25px; display: inline-block; font-weight: bold; }
        .preview-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; background: #000; padding: 15px; border-radius: 20px; max-height: 400px; overflow-y: auto; }
        .p-item { position: relative; border: 3px solid var(--neon); border-radius: 12px; overflow: hidden; }
        .p-item.disabled { border-color: #444; opacity: 0.3; filter: grayscale(1); }
        
        /* [L-450] Input Supreme */
        .btn-action { width: 100%; padding: 20px; margin-top: 25px; border: none; border-radius: 50px; background: linear-gradient(90deg, var(--neon), #0055ff); color: #000; font-family: 'Orbitron'; font-weight: 900; font-size: 1.2rem; }
        .input-box { width: 100%; background: #000; border: 1px solid #333; color: #fff; padding: 15px; border-radius: 12px; margin-top: 10px; }
        #status { text-align: center; margin-top: 20px; color: var(--gold); font-weight: bold; font-size: 1.1rem; }
    </style>
</head>
<body>

<canvas id="particle-bg"></canvas>

<header>
    <div class="swarg-text">SWARG</div>
    <div class="branding">
        <span class="amar-shine">Amar Kumar</span>
        <div class="tick">‚úî</div>
    </div>
</header>

<div class="container">
    <div id="home">
        <p style="text-align:center; color:#555; letter-spacing:3px; margin-bottom:30px;">ANDROID-FIRST ARCHITECTURE V15.0</p>
        <div class="grid">
            <div class="card" onclick="openTool('img2pdf')"><i>üåå</i><h3>IMG TO PDF</h3></div>
            <div class="card" onclick="openTool('split')"><i>‚úÇÔ∏è</i><h3>VISUAL SPLIT</h3></div>
            <div class="card" onclick="openTool('ocr')"><i>ü§ñ</i><h3>AI OCR</h3></div>
            <div class="card" onclick="openTool('sign')"><i>‚úçÔ∏è</i><h3>LEGAL SIGN</h3></div>
            <div class="card" onclick="openTool('comp-pdf')"><i>üìâ</i><h3>COMPRESS PDF</h3></div>
            <div class="card" onclick="openTool('comp-jpg')"><i>üñºÔ∏è</i><h3>COMPRESS JPG</h3></div>
        </div>
    </div>

    <div id="workspace">
        <span class="back-btn" onclick="location.reload()">‚Üê EXIT TOOL</span>
        <div class="panel">
            <h2 id="tool-title" style="text-align:center; color:var(--neon); font-family:'Orbitron'; margin-bottom:20px;"></h2>
            <div id="tool-ui"></div>
            <div id="status">READY...</div>
        </div>
    </div>
</div>

<script>
    // [L-600] Neural Particle Engine
    const canvas = document.getElementById('particle-bg');
    const ctx = canvas.getContext('2d');
    let pts = [];
    function init() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        pts = [];
        for(let i=0; i<80; i++) pts.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, vx:(Math.random()-0.5), vy:(Math.random()-0.5), r:Math.random()*2});
    }
    function draw() {
        ctx.clearRect(0,0,canvas.width, canvas.height); ctx.fillStyle = "rgba(0, 243, 255, 0.4)";
        pts.forEach(p => {
            p.x += p.vx; p.y += p.vy;
            if(p.x<0||p.x>canvas.width) p.vx*=-1; if(p.y<0||p.y>canvas.height) p.vy*=-1;
            ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
        });
        requestAnimationFrame(draw);
    }
    init(); draw();

    // [L-750] Core Logic
    const { jsPDF } = window.jspdf;
    const { PDFDocument } = PDFLib;
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
    let splitSet = new Set();
    let pad;

    function openTool(id) {
        document.getElementById('home').style.display = 'none';
        const ui = document.getElementById('tool-ui');
        const title = document.getElementById('tool-title');
        document.getElementById('workspace').style.display = 'block';

        if(id === 'split') {
            title.innerText = "VISUAL SPLITTER";
            ui.innerHTML = `<label>Upload PDF:</label><input type="file" id="fIn" class="input-box" onchange="renderSplit(this)"><div id="grid" class="preview-grid"></div><button class="btn-action" onclick="runSplit()">EXTRACT</button>`;
        } else if(id === 'comp-pdf') {
            title.innerText = "PDF COMPRESSOR";
            ui.innerHTML = `<label>Select PDF:</label><input type="file" id="fIn" class="input-box"><button class="btn-action" onclick="runCompPDF()">OPTIMIZE & SAVE</button>`;
        } else if(id === 'comp-jpg') {
            title.innerText = "JPG SHRINKER";
            ui.innerHTML = `<label>Select JPG:</label><input type="file" id="fIn" class="input-box" accept="image/*"><label>Target KB:</label><input type="number" id="target" class="input-box" value="100"><button class="btn-action" onclick="runCompJPG()">SHRINK TO TARGET</button>`;
        } else if(id === 'img2pdf') {
            title.innerText = "IMAGES TO PDF";
            ui.innerHTML = `<label>Select Images:</label><input type="file" id="fIn" multiple class="input-box"><button class="btn-action" onclick="runImg2Pdf()">BUILD PDF</button>`;
        } else if(id === 'sign') {
            title.innerText = "LEGAL SIGNATURE";
            ui.innerHTML = `<div style="background:#fff; border-radius:15px; overflow:hidden;"><canvas id="sig" style="width:100%; height:300px;"></canvas></div><button class="btn-action" onclick="pad.clear()" style="background:#333; color:#fff;">CLEAR</button><input type="file" id="fIn" class="input-box"><button class="btn-action" onclick="runSign()">STAMP SIGN</button>`;
            pad = new SignaturePad(document.getElementById('sig'));
        } else if(id === 'ocr') {
            title.innerText = "AI OCR ENGINE";
            ui.innerHTML = `<label>Upload Photo:</label><input type="file" id="fIn" accept="image/*" class="input-box"><button class="btn-action" onclick="runOCR()">SCAN TEXT</button>`;
        }
    }

    // [L-900] Heavy Engine Modules
    async function getFileName(def) {
        const { value: name } = await Swal.fire({ title: 'PDF Name', input: 'text', inputValue: def, background: '#111', color: '#fff' });
        return name || def;
    }

    async function renderSplit(input) {
        const grid = document.getElementById('grid');
        grid.innerHTML = "LOADING..."; splitSet.clear();
        const pdf = await pdfjsLib.getDocument(await input.files[0].arrayBuffer()).promise;
        grid.innerHTML = "";
        for(let i=1; i<=pdf.numPages; i++) {
            splitSet.add(i-1);
            const page = await pdf.getPage(i);
            const vp = page.getViewport({scale:0.3});
            const canvas = document.createElement('canvas');
            canvas.height = vp.height; canvas.width = vp.width;
            await page.render({canvasContext: canvas.getContext('2d'), viewport:vp}).promise;
            const div = document.createElement('div');
            div.className = "p-item"; div.appendChild(canvas);
            div.onclick = () => { div.classList.toggle('disabled'); if(splitSet.has(i-1)) splitSet.delete(i-1); else splitSet.add(i-1); };
            grid.appendChild(div);
        }
    }

    async function runCompJPG() {
        const file = document.getElementById('fIn').files[0];
        const target = document.getElementById('target').value;
        document.getElementById('status').innerText = "OPTIMIZING...";
        const options = { maxSizeMB: target/1024, useWebWorker: true };
        const compressed = await imageCompression(file, options);
        const link = document.createElement('a'); link.href = URL.createObjectURL(compressed); link.download = "Swarg_Small.jpg"; link.click();
        document.getElementById('status').innerText = "DONE!";
    }

    async function runCompPDF() {
        const file = document.getElementById('fIn').files[0];
        document.getElementById('status').innerText = "SHRINKING...";
        const pdf = await PDFDocument.load(await file.arrayBuffer());
        const bytes = await pdf.save({ useObjectStreams: true });
        triggerDownload(bytes, "Swarg_Lite.pdf");
        document.getElementById('status').innerText = "COMPRESSED!";
    }

    async function runImg2Pdf() {
        const files = document.getElementById('fIn').files;
        const name = await getFileName("Swarg_Bulk");
        const doc = new jsPDF();
        for(let i=0; i<files.length; i++) {
            const data = await new Promise(r => { const reader = new FileReader(); reader.onload = e => r(e.target.result); reader.readAsDataURL(files[i]); });
            if(i > 0) doc.addPage();
            doc.addImage(data, 'JPEG', 0, 0, 210, 297, undefined, 'FAST');
        }
        doc.save(name + ".pdf");
    }

    function triggerDownload(bytes, name) {
        const blob = new Blob([bytes], {type: "application/pdf"});
        const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = name; link.click();
    }
</script>
</body>
</html>
